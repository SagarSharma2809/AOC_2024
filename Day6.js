let sample_input = `....#.....
.........#
..........
..#.......
.......#..
..........
.#..^.....
........#.
#.........
......#...`;

let given_input = `........#.............................#......#................#..................#..................#.........#.#.#...............
...........................................#..#......................#............................#...........................#.#.
.............#..........#........#.#...........#........................#............................##...........................
............#.............#.....................................#........................#.....#..................................
.........#...........#................#................................#......#.....................#.............#..............#
...........................##...........................................................................................#.........
...........#.......#.................................................................#..............#....................#........
.......................#.............................................#.........................................#.#..............#.
.#...................#..................#...........#...#.........#...##..........................................................
.................#..........#.....#.........#.....................................................................#..........##...
....#.#............#..........#.......................#.........................#.................#.........#.............#....#..
...#....................................#.............#..............................#............#.....................#........#
....................#..............................#...#.#...#.#..........#.................................#..................#..
........................................................................................#.....#.........#............#.........#..
...................#.................#.......................................................................................#...#
..............#.......#..................#........#....#........#.....................#..........................#................
...........#..#....................................#.............#.#..#.......................................#.........#.#...#...
...#.............#............................#..............#....................#.#.............................................
..#...........#.#.........#...............................................#...#...............#.#...........#........##....#......
.............................................#..#.........#......#................................................................
.................................#.................#..............#.....#...................................................#.....
............................#.......#............#...............................................................#................
.....#....................#...........................................#..........................#..........#..#...#......#...#...
........................#......#...#.......................#....##.......#..........#...............#.............................
#..#....................................................................................................#.........................
...........................................#......#..........................#..............................#.............#.....#.
..............#......................#..#...................................#.#..................#.......#............#...........
.................#...................................#..........#......#....#.#.#...#....................#..........#......#......
........#....................................#........#.........................................#......#.#...............#......#.
..................................#......#........#........#.#......#.........................#.#.......#......................#..
......#..#.........#............#...........................................................#.............#.........#.............
.........................#......................#.....#........#..........#.......................................................
#.......#..................#............................................................#.........................................
.........#.....#.............#...............#......#.....................#.......................................................
.........#..#.........................................................#.........##..................##........#...................
.#.....#..............#..............#.........................................#.....................................#............
..............................#......................................................................................#............
..............#..........................#................................#.#.....#...........#.........#.........................
....................#...#.#...........................................................................#...........#...............
...........#.............................#....................#........#...............................##....#....................
.....................#......................#.#.....#...........................#.......#........#................................
#..........#...............#.......#..................................#.....................................................##....
.........................................................#...#....#...............................................#.........##....
.....................#......................#..............#..................................................#...................
......#.............#........#..................................................#...#.............................#......#........
....................#............#........#...............#......#.......#........................................................
..........................................................................#........................#......#.............#.......#.
.....................................................#..#........#....................#.....................#.....................
..#.................#........................................#................................................##...............#..
.............#......#.........#................................................................................#..................
#......#.......................................................................................................#......#...........
.......##.......................#...................#.........##..........#.............................#........................#
...........................................................#................................#...............#............##.......
..........................#...................#...........................................................#.............#........#
...#......................#..##................................................................................................#..
............#..#.........#...#.........................................................#........#..............#..................
.................#.................#........#............................................................................#........
............#..#..#..#....#...........................#.................................................#..#...................#..
....................................................#..#.................................#.#..............................#.......
.........#.#................................................#..#............................................................#.....
...##............................................#.....#.#...........................#....#.................#.#..........#........
...............#.#.#.........................................#......#.....#..............................................#....#...
.............#........................................#....#.......................................#...#....#.....................
...........#.................................#...............................................#...........#..#..#......#...........
#.......................................###....#....#.........................................#......#.............#..............
...............#.#.....................................................................................#....................#.....
##.........#..............#................................#..#..#..........#....................#..#..........#.....#............
...................#..........................................#........................#.......................................#..
#........#.#.....#............................................................##......#....#...........................#..........
...............##....#.............#......................................#......................#...................#.#..........
....................................##....#.............................................#..........#...................#....#.....
.....#...............#........#..............#.............#..#..#...#.................................................#.#...##...
........##.....................................................#..................................................................
.........#.............................................................#..........................................................
.............#.............#............................................................................#....#..........#.......#.
.#........#...........................................#....#.........#......#............#.#................................#....#
...............................................#.......#.............#.............#....................#.....................#...
......................................#....................................................#...................................#..
....#........#.....................................................#.......................................##.....................
..........................................#............................................#.......#.....................#...#........
................#.#.............#.....#....................#............#.............................................#...........
..............................#..............#.................#...................#...#.......#..................................
.#...............................................................#..................#......#............#................#........
...................................#.................................##...........................................................
...............................................................#....#..##...................#..#..............................#...
..............................#...........#.................................................#.#....#...............#.....#........
............................#........#.........#.........................................#....#...................................
........................#................................................#....#..............#.........................#..........
.........#....#....................#.......................#.#.......................................................#............
.........................#......................................................#.................................................
.............#...#...........#...................#.#..............^........................................#....#.................
.................##...............................................................................................................
..................#......#..............................#...............#.##.........................#............................
....................................................###...........................................................................
........#....................................................#........#........................................##...#.......#.....
.........................##.....#.........................................................................#.........#.............
.................#...........................................................................#........#..............#..#.........
.........#.#..................................#..#...................................#.................................#..........
.....#............#...#............#..............................#..........#.........#....#...........#.........................
#...#...........................................................................................#.....#....#.........#.....#......
......................................................#.#...............#......#.................#...............#.............#..
.......................................................................................#.........#...#...........#..............#.
.........................#................#.................#...............................#........#.##....................#....
.....#...#................................#......................#...........#........................................#..#........
.................#................................#.#.....................#............................................#....#.....
...................#............................................................................#........#.....................##.
.....#.................................................................#..................#........#.......#...#..................
...............................#..#...................................#..........#...........#......................#.............
....#................#..................#..........................................................................#........#.....
......#.........................#............................................#....................#....#..........................
.#.......#....#.#...#....#................#........................#...................#...................#......#...............
..#...................#......#.#........#.........................#.........................#............#........................
..#....#...#.......................................................................#......................#....................#..
.......#...#............................................................#.................#......................................#
..##..........#..................#...............#.....#..#...........#....#...............................................#......
...##....#............##..................................................................................................#.......
...........#.........................#....#......#...#.............................................#....................#........#
............................................................................#...............#..#..............#...................
.....#............................#.....................................................................................#......#.#
.........#.............................#.....#.........................................................#.#.....#..................
.......................#..#.#.......#..#................................#.....#..............#.........................#..........
.................#.....................#............................................................................#........#....
........#...............................................................#....#........#.........#.......#......#......#...........
..............#............#......#..............#.#...........#.............................##...##.#..............#.....#.......
##....................................................................#.......................#.................#.................
............#...................................................................................................................#.
...#....#....................#..............................................................................#........#............
....#......................#......................................................#...............................................
.#...#...........#....#........#...#.................#..............................#................#.##.........................
...#.................#..............................#................................#...........#................................`;

const direction = ["^", ">", "v", "<"];
let ptr = 0; //start at facing up
//part 1

const part1 = (inp) => {
  //parse the input
  let inputArr = inp.split("\n");
  let position = null;
  let next_position = [0, 0];
  let distinct_steps = 1;
  let skipped = 0;
  let flag = 0;

  inputArr = inputArr.map((row) => row.split(""));

  //   console.log("boundary", inputArr.length, inputArr[0].length);
  //get the current position
  for (let i = 0; i < inputArr.length; i++) {
    for (let j = 0; j < inputArr[0].length; j++) {
      let curr = inputArr[i][j];

      if (curr == "^") {
        position = [i, j];
        break;
      }
    }
    if (position) {
      break;
    }
  }

  //run the algorithm and count distinct steps
  while (
    position[0] >= 0 &&
    position[1] >= 0 &&
    position[0] < inputArr.length &&
    position[1] < inputArr[0].length
  ) {
    //while cursor is inside the boundary

    // console.log("\n\n");
    // console.log("new iteration");
    next_position = [0, 0];

    switch (direction[ptr]) {
      case "^": {
        //next position will be prev row, same column
        next_position[0] = position[0] - 1;
        next_position[1] = position[1];
        break;
      }

      case ">": {
        //next position will be same row, next column
        next_position[0] = position[0];
        next_position[1] = position[1] + 1;
        break;
      }

      case "v": {
        //next position will next row, same column
        next_position[0] = position[0] + 1;
        next_position[1] = position[1];
        break;
      }

      case "<": {
        //next position will be prev column, same row
        next_position[0] = position[0];
        next_position[1] = position[1] - 1;
        break;
      }
    }

    if (
      !(
        next_position[0] >= 0 &&
        next_position[1] >= 0 &&
        next_position[0] < inputArr.length &&
        next_position[1] < inputArr[0].length
      )
    ) {
      inputArr[position[0]][position[1]] = direction[ptr];
      ++distinct_steps;
      break;
    }

    if (inputArr[next_position[0]][next_position[1]] == "#") {
      //change direction
      ptr = (ptr + 1) % 4;
      //   console.log("direction changed at position", position);
    } else if (direction.includes(inputArr[position[0]][position[1]])) {
      position[0] = next_position[0];
      position[1] = next_position[1];
      skipped++;
    } else {
      //   console.log(position);
      inputArr[position[0]][position[1]] = direction[ptr];

      if (flag) {
        distinct_steps;
      }

      //   console.log("marked step", ++distinct_steps);
      flag = 1;

      position[0] = next_position[0];
      position[1] = next_position[1];
      //   console.log("new position", position);
    }
  }

  inputArr = inputArr.map((row) => row.join(""));
  //   inputArr.map((row) => console.log(row));
  //   console.log("skipped steps", skipped);

  return distinct_steps;
};

function time() {
  const times = [];

  for (let i = 0; i < 10000; i++) {
    const start = Date.now();
    part1(given_input);
    times.push(Date.now() - start);
  }

  const mean = times.reduce((acc, cur) => acc + cur, 0) / 10000,
    min = Math.min(...times),
    max = Math.max(...times);

  console.log({
    mean,
    min,
    max,
  });
}

//part:2

//if overlapping is '^' and we are going '<' this way, put obstacle next position of overlapping

//if overlapping is '<' and we are going 'v" way, put obstacle next position of overlapping

//if overlapping is 'v' and we are going '>' way, put obstacle...



//if overlapping '^' is the same column and we are going '<' this way, put obstacle...

//if overlapping '<' is the same row and we are going 'v' this way, put obstacle...

//.
//.
//.

//similar in all cases
